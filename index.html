<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - FROGS</title>
<link rel="icon" href="aio.png" type="image/png">
<link rel="stylesheet" href="style.css">
</head>
<body>
<!-- ===================== LOGIN ===================== -->
<div id="login-overlay" style="
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.92);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  color: #fff;
  font-family: 'Poppins', sans-serif;
">
  <div style="background:#222; padding:30px; border-radius:15px; text-align:center; width:320px; box-shadow:0 0 15px rgba(255,255,255,0.1);">
    <h2 style="margin-bottom:15px;">Login FROGS</h2>
    <input id="login-user" placeholder="Usuário" style="width:90%;padding:10px;margin:6px 0;border:none;border-radius:8px;font-size:1rem;">
    <input id="login-pass" type="password" placeholder="Senha" style="width:90%;padding:10px;margin:6px 0;border:none;border-radius:8px;font-size:1rem;">
    <button id="login-btn" style="width:95%;padding:10px;background:#f8a5c2;color:#111;border:none;border-radius:8px;cursor:pointer;margin-top:8px;font-weight:600;">Entrar</button>
    <p id="login-msg" style="color:#f77;margin-top:8px;font-size:0.9rem;"></p>
  </div>
</div>
<script>
/*
mongoose.connect('mongodb+srv://heitormiguelribeiro150611_db_user:xMJR3LArlTWXXfDF@cluster0.brxeccx.mongodb.net/sistemaLogin?retryWrites=true&w=majority')
  .then(() => console.log('✅ Conectado ao MongoDB Atlas'))
  .catch(err => console.error('❌ Erro ao conectar ao MongoDB:', err));


const express = require('express');
const bcrypt = require('bcrypt');
const session = require('express-session');
const bodyParser = require('body-parser');
const flash = require('connect-flash');
const User = require('./models/User');

// Configurações
app.set('view engine', 'ejs');
app.use(express.static('public'));
app.use(bodyParser.urlencoded({ extended: true }));
app.use(session({
  secret: 'meuSegredo',
  resave: false,
  saveUninitialized: false
}));
app.use(flash());

// Middleware pra mensagens flash
app.use((req, res, next) => {
  res.locals.success = req.flash('success');
  res.locals.error = req.flash('error');
  next();
});

// Conexão com MongoDB
mongoose.connect('mongodb://localhost:27017/sistemaLogin', {
  useNewUrlParser: true,
  useUnifiedTopology: true
}).then(() => console.log('✅ MongoDB conectado'))
  .catch(err => console.log(err));

// Rota inicial
app.get('/', (req, res) => {
  if (!req.session.userId) return res.redirect('/login');
  res.redirect('/dashboard');
});

// Página de login
app.get('/login', (req, res) => res.render('login'));

// Login
app.post('/login', async (req, res) => {
  const { username, password } = req.body;
  const user = await User.findOne({ username });

  if (!user) return res.send('Usuário não encontrado');
  const match = await bcrypt.compare(password, user.password);
  if (!match) return res.send('Senha incorreta');

  req.session.userId = user._id;
  req.session.role = user.role;
  res.redirect('/dashboard');
});
</script>
<script src="wthidkpli1.js"></script>
<script src="wthidkpli2.js"></script>
<script src="wthidkpli3.js"></script>
<script src="wthidkpli4.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli1.js"></script>
<script src="whtidkpli.js"></script>
<script src="wthidkpli1.js"></script>
<script src="wthidkpli2.js"></script>
<script src="wthidkpli3.js"></script>
<script src="wthidkpli4.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli.js"></script>
<script src="wthidkpli.js"></script>

<script>
  /*
// Logout
app.get('/logout', (req, res) => {
  req.session.destroy();
  res.redirect('/login');
});

// Painel
app.get('/dashboard', async (req, res) => {
  if (!req.session.userId) return res.redirect('/login');

  const user = await User.findById(req.session.userId);
  const users = await User.find();

  res.render('dashboard', { user, users });
});

// Registrar usuário (somente admins)
app.get('/register', (req, res) => {
  if (req.session.role !== 'admin') return res.send('Acesso negado');
  res.render('register');
});

app.post('/register', async (req, res) => {
  if (req.session.role !== 'admin') return res.send('Acesso negado');

  const { username, password, role } = req.body;
  const hashedPassword = await bcrypt.hash(password, 10);

  try {
    const user = new User({ username, password: hashedPassword, role });
    await user.save();
    res.redirect('/dashboard');
  } catch (err) {
    res.send('Erro ao criar usuário');
  }
});

app.listen(3000, () => console.log('Servidor rodando em http://localhost:3000'));


//mongodb+srv://heitormiguelribeiro150611_db_user:xMJR3LAr1TWXXfDF@cluster0.bxreccc.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0

const mongoose = require('mongoose');
const app = express();

mongoose.connect('mongodb+srv://heitormiguelribeiro150611_db_user:xMJR3LArlTWXXfDF@cluster0.brxeccx.mongodb.net/sistemaLogin?retryWrites=true&w=majority')
  .then(() => console.log('✅ Conectado ao MongoDB Atlas'))
  .catch(err => console.error('❌ Erro ao conectar ao MongoDB:', err));

app.listen(3000, () => console.log('Servidor rodando em http://localhost:3000'));
*/
</script>

</body>
</html>









